<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos</title>
</head>
<body>
    <h1>Lista de Pedidos</h1>
    <table border="1">
        <thead>
            <tr>
                <th>ID Pedido</th>
                <th>Cliente</th>
                <th>Total</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody id="tabla-pedidos">
            <!-- AquÃ­ se llenarÃ¡n los pedidos dinÃ¡micamente -->
        </tbody>
    </table>

    <script>
        document.addEventListener("DOMContentLoaded", async function() {
    const params = new URLSearchParams(window.location.search);
    const id_cliente = params.get("id_cliente");

    if (!id_cliente) {
        alert("Error: No se encontrÃ³ el cliente.");
        return;
    }

    try {
        const response = await fetch(`/api/cliente/obtener-pedidos-cliente/${id_cliente}`);
        const data = await response.json();

        console.log("ðŸ“¦ Pedidos recibidos:", data); // Muestra en consola los pedidos

        if (data.success) {
            mostrarPedidosEnPantalla(data.pedidos);
        } else {
            alert("No se encontraron pedidos.");
        }
    } catch (error) {
        console.error("Error al obtener los pedidos:", error);
    }
});

function mostrarPedidosEnPantalla(pedidos) {
    const pedidosContainer = document.getElementById("pedidos-container"); // AsegÃºrate de tener un contenedor en pedidos.html

    if (!pedidos.length) {
        pedidosContainer.innerHTML = "<p>No hay pedidos disponibles.</p>";
        return;
    }

    pedidosContainer.innerHTML = pedidos.map(pedido => `
        <div class="pedido">
            <p><strong>ID Pedido:</strong> ${pedido.id}</p>
            <p><strong>Total:</strong> $${pedido.total}</p>
            <p><strong>Estado:</strong> ${pedido.estado}</p>
        </div>
    `).join('');
}

    </script>
</body>
</html>
